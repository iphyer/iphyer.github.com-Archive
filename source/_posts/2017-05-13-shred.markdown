---
layout: post
title: "如何确保文件完全删除"
date: 2017-05-13 09:42
comments: true
categories: Linux
---

##原因

最近需要把实验室的一块硬盘给另外一个实验室存储数据，他们把他们的数据写进去再还给我们。

所以需要把这块硬盘完全删除，毕竟这块硬盘其实是实验室的FTP分享硬盘。当然也是最近又升级了，所以
这块硬盘就空下来作为交换数据用了。

<!--more-->

##如何实现数据的完全删除

其实google一下就可以搜索导致这个方法，主要是参考这个帖子 [Securely erasing a storage device](https://askubuntu.com/questions/17640/how-can-i-securely-erase-a-hard-drive)

###原理

一般的删除其实都是再文件系统级别删除和操作，本质上其实是一种对于文件表的操作，并没有完全删除硬盘上的数据(0,1,0,1的bit)。操作系统只是把这块文件原来占有的 Bits 区域标记为可以使用，如果不做特别操作，事实是短时间内，这块 Bits 上的数据是完好无损的。所以，如果你有一种特别的程序可以完全拷贝 Bits　数据，这样的话，你只要知道文件的数据格式是可以恢复数据的。

所以最好的方法办法很简单就是在删除数据后把这些内存再随机重复写一边，比如随机写入 0,1　覆盖原来的数据。

###操作

先用`fdisk`找出可用硬盘

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

sudo fdisk -l

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

然后运行如下命令写入相应的硬盘，比如再我的电脑上是`/dev/sdc`

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

sudo shred -v -n1 -z /dev/sdX

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

命令中的`-n1`是只做一边，当然比较保险是做3边,然后是`-v`是给出详细的进度信息。

最后这块硬盘再重新格式化即可使用。

进入信息:

![tu1](/images/shred/shred.png)



